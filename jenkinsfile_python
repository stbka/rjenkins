pipeline {
    agent { 
	docker { images 'python:2.7-alpine' }
    }
    stages {
        stage('Identification') {
            steps {
                sh 'echo "Whoami: $(whoami)"'
                sh 'echo "Working dir: $(pwd)"'
                sh 'echo "More detailed user attr: $(id)"'
            }
        }
        stage('Execution') {
            steps { 
                retry(3) {
                    timeout(time:1, unit:'MINUTES') {
                        sh 'echo "Hello World"'
                    }
                }
            }
        }
    }
      
    post {
        always {
            sh 'echo "This runs always"'
        }
        success {
            sh 'echo "This runs when job was successful."'
        }
        failure {
            sh 'echo "This runs when job was failed."'
        }
        unstable {
            sh 'echo "This runs when job was marked as unstable"'
        }
        changed {
            sh 'echo "This runs when execution status changed."'
        }
    }
}
